---
title: Data Validation
description: 'Master data validation techniques with validate() and isValid() methods'
icon: 'check'
---

Data validation is the core functionality of JSON Schema. Learn how to validate data against your schemas, handle validation results, and work with validation errors effectively.

## Basic Validation Methods

Every schema provides two primary validation methods:

```php
use Cortex\JsonSchema\Schema;
use Cortex\JsonSchema\Exceptions\SchemaException;

$schema = Schema::string('name')
    ->minLength(2)
    ->maxLength(50)
    ->required();

// Method 1: isValid() - returns boolean
$isValid = $schema->isValid('John Doe');  // true
$isValid = $schema->isValid('J');         // false

// Method 2: validate() - throws exception on failure
try {
    $schema->validate('John Doe');
    echo "Valid!";
} catch (SchemaException $e) {
    echo "Invalid: " . $e->getMessage();
}
```

## Using isValid() for Boolean Checks

The `isValid()` method is perfect for simple true/false validation:

```php
$emailSchema = Schema::string('email')
    ->format(SchemaFormat::Email)
    ->required();

$emails = [
    'valid@example.com',
    'invalid-email',
    'another@test.org'
];

$validEmails = [];
foreach ($emails as $email) {
    if ($emailSchema->isValid($email)) {
        $validEmails[] = $email;
    }
}

// $validEmails contains: ['valid@example.com', 'another@test.org']
```

### Conditional Logic with isValid()

```php
$userSchema = Schema::object('user')
    ->properties(
        Schema::string('name')->required(),
        Schema::integer('age')->minimum(18)->required(),
        Schema::string('email')->format(SchemaFormat::Email)->required()
    );

$userData = [
    'name' => 'John Doe',
    'age' => 25,
    'email' => 'john@example.com'
];

if ($userSchema->isValid($userData)) {
    // Process valid user data
    echo "Processing user: " . $userData['name'];
} else {
    // Handle invalid data
    echo "User data is invalid";
}
```

## Using validate() for Detailed Error Information

The `validate()` method throws descriptive exceptions when validation fails:

```php
$productSchema = Schema::object('product')
    ->properties(
        Schema::string('name')
            ->minLength(1)
            ->maxLength(100)
            ->required(),
        Schema::number('price')
            ->minimum(0)
            ->multipleOf(0.01)
            ->required(),
        Schema::array('tags')
            ->items(Schema::string())
            ->maxItems(10)
    )
    ->additionalProperties(false);

$productData = [
    'name' => '',  // Too short
    'price' => -10,  // Below minimum
    'tags' => ['electronics', 'mobile', /* 9 more tags */],  // Too many items
    'invalid_field' => 'not allowed'  // Additional property
];

try {
    $productSchema->validate($productData);
} catch (SchemaException $e) {
    echo "Validation error: " . $e->getMessage();
    // "String must have minimum length of 1"

    // Access detailed error information
    $errors = $e->getErrors();
    print_r($errors);
}
```

## Validating Complex Data Structures

### Object Validation

```php
$orderSchema = Schema::object('order')
    ->properties(
        Schema::string('id')->required(),
        Schema::object('customer')
            ->properties(
                Schema::string('name')->required(),
                Schema::string('email')->format(SchemaFormat::Email)->required()
            )
            ->required(),
        Schema::array('items')
            ->items(
                Schema::object()
                    ->properties(
                        Schema::string('sku')->required(),
                        Schema::integer('quantity')->minimum(1)->required(),
                        Schema::number('price')->minimum(0)->required()
                    )
            )
            ->minItems(1)
            ->required()
    );

$orderData = [
    'id' => 'ORD-123',
    'customer' => [
        'name' => 'John Doe',
        'email' => 'john@example.com'
    ],
    'items' => [
        [
            'sku' => 'PROD-001',
            'quantity' => 2,
            'price' => 29.99
        ],
        [
            'sku' => 'PROD-002',
            'quantity' => 1,
            'price' => 15.50
        ]
    ]
];

if ($orderSchema->isValid($orderData)) {
    echo "Order is valid";
} else {
    try {
        $orderSchema->validate($orderData);
    } catch (SchemaException $e) {
        echo "Order validation failed: " . $e->getMessage();
    }
}
```

### Array Validation

```php
$scoresSchema = Schema::array('test_scores')
    ->items(
        Schema::object()
            ->properties(
                Schema::string('student_id')->required(),
                Schema::integer('score')
                    ->minimum(0)
                    ->maximum(100)
                    ->required(),
                Schema::string('subject')
                    ->enum(['math', 'science', 'english', 'history'])
                    ->required()
            )
    )
    ->minItems(1)
    ->uniqueItems(true);

$scoresData = [
    [
        'student_id' => 'STU-001',
        'score' => 95,
        'subject' => 'math'
    ],
    [
        'student_id' => 'STU-002',
        'score' => 87,
        'subject' => 'science'
    ]
];

try {
    $scoresSchema->validate($scoresData);
    echo "All scores are valid";
} catch (SchemaException $e) {
    echo "Score validation error: " . $e->getMessage();
}
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Error Handling"
    icon="exclamation-triangle"
    href="/validation/error-handling"
  >
    Learn advanced error handling and custom exception management
  </Card>
  <Card
    title="Schema Factory"
    icon="factory"
    href="/api-reference/schema-factory"
  >
    Explore the complete Schema Factory API reference
  </Card>
</CardGroup>
